<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Robot Mapper: src/RmUtility.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000001.html">src</a></div>
<h1>RmUtility.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">// RmUtility.cpp</span>
00002 
00003 <span class="preprocessor">#include "RmUtility.h"</span>
00004 <span class="preprocessor">#include "RmPioneerController.h"</span>
00005 
00006 <span class="keyword">using</span> <span class="keyword">namespace </span>RmUtility;
00007 
00009 <span class="comment">//        Coord        //</span>
00011 <span class="comment"></span>
00012 
<a name="l00013"></a><a class="code" href="class_rm_utility_1_1_coord.html#a8">00013</a> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> <a class="code" href="class_rm_utility_1_1_coord.html#a8">Coord::operator +</a>( <span class="keyword">const</span> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;addend )<span class="keyword"> const</span>
00014 <span class="keyword"></span>{
00015         <span class="keywordflow">return</span> <a class="code" href="class_rm_utility_1_1_coord.html#a2">Coord</a>( <a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> + addend.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>, <a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> + addend.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> );
00016 }
00017 
00018 
<a name="l00019"></a><a class="code" href="class_rm_utility_1_1_coord.html#a10">00019</a> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> <a class="code" href="class_rm_utility_1_1_coord.html#a10">Coord::operator -</a>( <span class="keyword">const</span> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;subtrahend )<span class="keyword"> const</span>
00020 <span class="keyword"></span>{
00021         <span class="keywordflow">return</span> <a class="code" href="class_rm_utility_1_1_coord.html#a2">Coord</a>( <a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> - subtrahend.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>, <a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> - subtrahend.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> );
00022 }
00023 
00024 
<a name="l00025"></a><a class="code" href="class_rm_utility_1_1_coord.html#a16">00025</a> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;<a class="code" href="class_rm_utility_1_1_coord.html#a16">Coord::scale</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> factor )
00026 {
00027         <span class="comment">// Convert to grid coordinate scale</span>
00028         <span class="keywordtype">double</span> <a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> = this-&gt;x / factor;
00029         <span class="keywordtype">double</span> <a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> = this-&gt;y / factor;
00030         
00031         <span class="comment">// Compute the "ceiling" for negative coordinates such that the proper cell is returned</span>
00032         <span class="comment">// (if a coord falls within the cell between (-382,-383), its y-coord is actually -383;</span>
00033         <span class="comment">// if a coord falls within the cell between (382,383), it's y-coord is 382)</span>
00034         <span class="comment">// For example, (-382.2, -52.89) should map to (-383, -53)</span>
00035         <span class="comment">// whereas (382.2, 52.89) should map to (382, 52)</span>
00036         <span class="comment">// This accounts for coordinate (0,0) being the first cell over, first cell up.</span>
00037         this-&gt;x = static_cast&lt;int&gt;( floor(x) == x ? x : (x &gt; 0 ? x : x - 1) );
00038         this-&gt;y = static_cast&lt;int&gt;( floor(y) == y ? y : (y &gt; 0 ? y : y - 1) );
00039         
00040         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00041 }
00042 
00043 
<a name="l00044"></a><a class="code" href="class_rm_utility_1_1_coord.html#a5">00044</a> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> <a class="code" href="class_rm_utility_1_1_coord.html#a5">Coord::mappedTo</a>( <span class="keywordtype">double</span> theta, <span class="keywordtype">double</span> distance )<span class="keyword"> const</span>
00045 <span class="keyword"></span>{
00046         <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> coord;
00047         <span class="keywordtype">double</span> sinTh = sin( theta * RadianFactor );
00048         <span class="keywordtype">double</span> cosTh = cos( theta * RadianFactor );
00049         coord.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> = <a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> + static_cast&lt;int&gt;(sinTh * distance + (sinTh &lt; 0 ? -0.5 : 0.5 ));
00050         coord.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> = <a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> + static_cast&lt;int&gt;(cosTh * distance + (cosTh &lt; 0 ? -0.5 : 0.5 ));
00051         <span class="keywordflow">return</span> coord;
00052 }
00053 
00054 
<a name="l00055"></a><a class="code" href="class_rm_utility_1_1_coord.html#a6">00055</a> <span class="keywordtype">void</span> <a class="code" href="class_rm_utility_1_1_coord.html#a6">Coord::mapTo</a>( <span class="keywordtype">double</span> theta, <span class="keywordtype">double</span> distance )
00056 {
00057         *<span class="keyword">this</span> = <a class="code" href="class_rm_utility_1_1_coord.html#a5">mappedTo</a>( theta, distance );
00058 }
00059 
00060 
<a name="l00061"></a><a class="code" href="class_rm_utility_1_1_coord.html#a15">00061</a> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> <a class="code" href="class_rm_utility_1_1_coord.html#a15">Coord::rotatedBy</a>( <span class="keywordtype">double</span> rotationTheta, <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> pivot )<span class="keyword"> const</span>
00062 <span class="keyword"></span>{
00063         <span class="comment">// Get polar magnitude and direction of existing coord</span>
00064         <span class="keywordtype">double</span> mag = <a class="code" href="class_rm_utility_1_1_coord.html#a3">distanceFrom</a>( pivot );
00065         <span class="keywordtype">double</span> th = <a class="code" href="class_rm_utility_1_1_coord.html#a0">angleFrom</a>( pivot );
00066 
00067         <span class="comment">// Rotate to new coordinate</span>
00068         th += rotationTheta;
00069         <span class="keywordflow">if</span> ( th &gt;= 360 ) th -= 360;
00070         <span class="keywordflow">return</span> pivot.<a class="code" href="class_rm_utility_1_1_coord.html#a5">mappedTo</a>( th, mag );
00071 }
00072 
00073 
<a name="l00074"></a><a class="code" href="class_rm_utility_1_1_coord.html#a14">00074</a> <span class="keywordtype">void</span> <a class="code" href="class_rm_utility_1_1_coord.html#a14">Coord::rotateBy</a>( <span class="keywordtype">double</span> rotationTheta, <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> pivot )
00075 {
00076         *<span class="keyword">this</span> = <a class="code" href="class_rm_utility_1_1_coord.html#a15">rotatedBy</a>( rotationTheta, pivot );
00077 }
00078 
00079 
<a name="l00080"></a><a class="code" href="class_rm_utility_1_1_coord.html#a4">00080</a> <span class="keywordtype">double</span> <a class="code" href="class_rm_utility_1_1_coord.html#a4">Coord::distanceTo</a>( <span class="keyword">const</span> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;coord )<span class="keyword"> const</span>
00081 <span class="keyword"></span>{
00082         <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> delta = coord - *<span class="keyword">this</span>;
00083         <span class="keywordflow">return</span> sqrt( static_cast&lt;double&gt;(delta.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> * delta.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> + delta.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> * delta.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a>) );
00084 }
00085 
00086 
<a name="l00087"></a><a class="code" href="class_rm_utility_1_1_coord.html#a1">00087</a> <span class="keywordtype">double</span> <a class="code" href="class_rm_utility_1_1_coord.html#a1">Coord::angleTo</a>( <span class="keyword">const</span> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;coord )<span class="keyword"> const</span>
00088 <span class="keyword"></span>{
00089         <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> delta = coord - *<span class="keyword">this</span>;
00090         
00091         <span class="comment">// (this is real ugly, but it works)</span>
00092         <span class="keywordtype">double</span> th = delta.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> != 0 ? atan( delta.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> / static_cast&lt;double&gt;(delta.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>) ) / RadianFactor : 0;
00093         <span class="keywordflow">return</span> (delta.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &gt; 0 ? 90 : delta.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> == 0 ? delta.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &gt;= 0 ? 0 : 180 : 270) - th;
00094 }
00095 
00096 
00097 <span class="comment">// Note: Doxygen doesn't like the RmUtility:: qualifier, but the linker requires it</span>
00098 std::ostream &amp;RmUtility::operator&lt;&lt;( std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;c )
00099 {
00100         <span class="keywordflow">return</span> os &lt;&lt; <span class="stringliteral">"("</span> &lt;&lt; c.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; c.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &lt;&lt; <span class="stringliteral">")"</span>;
00101 }
00102 
00103 
00104 
00106 <span class="comment">//      BoundBox       //</span>
00108 <span class="comment"></span>
00109 
<a name="l00110"></a><a class="code" href="struct_rm_utility_1_1_bound_box.html#a2">00110</a> <span class="keywordtype">bool</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html#a2">BoundBox::contains</a>( <span class="keyword">const</span> <a class="code" href="class_rm_utility_1_1_coord.html">Coord</a> &amp;point )<span class="keyword"> const</span>
00111 <span class="keyword"></span>{
00112         <span class="keywordflow">return</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &lt;= point.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &amp;&amp; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &gt;= point.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &amp;&amp; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &gt;= point.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &amp;&amp; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &lt;= point.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a>;
00113 }
00114 
00115 
<a name="l00116"></a><a class="code" href="struct_rm_utility_1_1_bound_box.html#a8">00116</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a>&amp;  <a class="code" href="struct_rm_utility_1_1_bound_box.html#a8">BoundBox::unionWith</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> &amp;box )
00117 {
00118         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &lt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>;
00119         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &gt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a>;
00120         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &gt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>;
00121         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &lt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a>;
00122 
00123         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00124 }
00125 
00126 
<a name="l00127"></a><a class="code" href="struct_rm_utility_1_1_bound_box.html#a5">00127</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a>&amp;  <a class="code" href="struct_rm_utility_1_1_bound_box.html#a5">BoundBox::intersectWith</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> &amp;box )
00128 {
00129         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &gt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>;
00130         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &lt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a>;
00131         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> &lt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a>;
00132         <span class="keywordflow">if</span> ( box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> &gt; <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> ) <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> = box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a>;
00133 
00134         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00135 }
00136 
00137 
<a name="l00138"></a><a class="code" href="struct_rm_utility_1_1_bound_box.html#a3">00138</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a>&amp; <a class="code" href="struct_rm_utility_1_1_bound_box.html#a3">BoundBox::expandBy</a>( <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> s, <span class="keywordtype">int</span> e, <span class="keywordtype">int</span> w )
00139 {
00140         <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> += n;
00141         <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o1">y</a> += s;
00142         <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> += e;
00143         <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>.<a class="code" href="class_rm_utility_1_1_coord.html#o0">x</a> += w;
00144 
00145         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00146 }
00147 
00148 
<a name="l00149"></a><a class="code" href="struct_rm_utility_1_1_bound_box.html#a7">00149</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html#a7">BoundBox::operator-</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> &amp;subtrahend )<span class="keyword"> const</span>
00150 <span class="keyword"></span>{
00151         <span class="keywordflow">return</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html#a1">BoundBox</a>( <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a> - subtrahend.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>, <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a> - subtrahend.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a> );
00152 }
00153 
00154 
<a name="l00155"></a><a class="code" href="struct_rm_utility_1_1_bound_box.html#a6">00155</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> <a class="code" href="struct_rm_utility_1_1_bound_box.html#a6">BoundBox::operator+</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> &amp;addend )<span class="keyword"> const</span>
00156 <span class="keyword"></span>{
00157         <span class="keywordflow">return</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html#a1">BoundBox</a>( <a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a> + addend.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a>, <a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a> + addend.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a> );
00158 }
00159 
00160 
00161 <span class="comment">// Note: Doxygen doesn't like the RmUtility:: qualifier, but the linker requires it</span>
00162 std::ostream &amp;RmUtility::operator&lt;&lt;( std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_bound_box.html">BoundBox</a> &amp;box )
00163 {
00164         <span class="keywordflow">return</span> os &lt;&lt; box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o1">ul</a> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; box.<a class="code" href="struct_rm_utility_1_1_bound_box.html#o0">lr</a>;
00165 }
00166 
00167 
00168 
00170 <span class="comment">//    SonarReading     //</span>
00172 <span class="comment"></span>
00173 
<a name="l00174"></a><a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a6">00174</a> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a8">SonarReading::SonarReading</a>( ArRobot *robot )
00175         : sonarNumber(0), distance(0)
00176 {
00177         ArPose arPose = robot-&gt;getPose();
00178         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a> = <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a>( arPose.getX(), arPose.getY(), arPose.getTh() );
00179         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; RmPioneerController::NumSonars; ++i ) {
00180                 <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[i] = static_cast&lt;int&gt;(robot-&gt;getSonarRange( i ));
00181         }
00182 }
00183 
00184 
<a name="l00185"></a><a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a5">00185</a> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a8">SonarReading::SonarReading</a>( <span class="keywordtype">char</span> *line )
00186         : sonarNumber(0), distance(0)
00187 {
00188         <span class="keywordtype">char</span>* token = strtok( line, <span class="stringliteral">" "</span> );
00189         <span class="keyword">const</span> <span class="keywordtype">int</span> x = atoi(token);
00190         token = strtok( NULL, <span class="stringliteral">" "</span> );
00191         <span class="keyword">const</span> <span class="keywordtype">int</span> y = atoi(token);
00192         token = strtok( NULL, <span class="stringliteral">" "</span> );
00193         <span class="keyword">const</span> <span class="keywordtype">double</span> th = atof(token);
00194         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a> = <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a>( RmPioneerController::pose( ArPose( x, y, th ) ) );
00195         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; RmPioneerController::NumSonars; ++i )
00196         {
00197                 token = strtok( NULL, <span class="stringliteral">" "</span> );
00198                 <span class="keywordflow">if</span> ( token ) <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[i] = atoi( token );
00199                 <span class="keywordflow">else</span> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[i] = 0;
00200         }
00201 }
00202 
00203 
<a name="l00204"></a><a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a0">00204</a> <span class="keywordtype">void</span> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a0">SonarReading::initRanges</a>( <span class="keyword">const</span> <span class="keywordtype">int</span> *r )
00205 {
00206         <span class="keywordflow">if</span> ( r == NULL ) {
00207                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; RmPioneerController::NumSonars; ++i ) <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[i] = 0;
00208         }
00209         <span class="keywordflow">else</span> {
00210                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; RmPioneerController::NumSonars; ++i ) <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[i] = r[i];
00211         }
00212 }
00213 
00214 
<a name="l00215"></a><a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a4">00215</a> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a8">SonarReading::SonarReading</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html">SonarReading</a> &amp;r )
00216 {
00217         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a> = r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a>;
00218         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o3">sonarNumber</a> = r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o3">sonarNumber</a>;
00219         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o1">distance</a> = r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o1">distance</a>;
00220         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a0">initRanges</a>( &amp;r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[0] );
00221 }
00222 
00223 
<a name="l00224"></a><a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a1">00224</a> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html">SonarReading</a>&amp; <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a1">SonarReading::operator=</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html">SonarReading</a> &amp;r )
00225 {
00226         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a> = r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a>;
00227         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o3">sonarNumber</a> = r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o3">sonarNumber</a>;
00228         <a class="code" href="struct_rm_utility_1_1_sonar_reading.html#a0">initRanges</a>( &amp;r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[0] );
00229 
00230         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00231 }
00232 
00233 
00234 <span class="comment">// Note: Doxygen doesn't like the RmUtility:: qualifier, but the linker requires it</span>
00235 std::ostream &amp;RmUtility::operator&lt;&lt;( std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_sonar_reading.html">SonarReading</a> &amp;r )
00236 {
00237         os &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o2">robotPose</a> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o3">sonarNumber</a> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o3">sonarNumber</a>] &lt;&lt; <span class="stringliteral">" [ "</span>;
00238         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; RmPioneerController::NumSonars; ++i ) os &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_sonar_reading.html#o0">all</a>[i] &lt;&lt; <span class="stringliteral">" "</span>;
00239         <span class="keywordflow">return</span> os &lt;&lt; <span class="stringliteral">"]"</span>;
00240 }
00241 
00242 
00243 
00245 <span class="comment">// MappedSonarReading  //</span>
00247 <span class="comment"></span>
00248 
00249 <span class="comment">// Note: Doxygen doesn't like the RmUtility:: qualifier, but the linker requires it</span>
00250 std::ostream &amp;RmUtility::operator&lt;&lt;( std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_mapped_sonar_reading.html">MappedSonarReading</a> &amp;r )
00251 {
00252         <span class="keywordflow">return</span> os 
00253                 &lt;&lt; <span class="stringliteral">"Robot: "</span> &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_mapped_sonar_reading.html#o1">reading</a> &lt;&lt; <span class="stringliteral">"\n"</span>
00254                 &lt;&lt; <span class="stringliteral">"Sonar: "</span> &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_mapped_sonar_reading.html#o2">sonarPose</a> &lt;&lt; <span class="stringliteral">"\n"</span>
00255                 &lt;&lt; <span class="stringliteral">"Object: "</span> &lt;&lt; r.<a class="code" href="struct_rm_utility_1_1_mapped_sonar_reading.html#o0">objectCoord</a> &lt;&lt; <span class="stringliteral">"\n"</span>;
00256 }
00257 
00258 
00259 
00261 <span class="comment">//        Pose         //</span>
00263 <span class="comment"></span>
00264 
<a name="l00265"></a><a class="code" href="struct_rm_utility_1_1_pose.html#a3">00265</a> <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a> <a class="code" href="struct_rm_utility_1_1_pose.html#a3">Pose::operator -</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a> &amp;subtrahend )<span class="keyword"> const</span>
00266 <span class="keyword"></span>{
00267         <span class="keywordtype">double</span> th = <a class="code" href="struct_rm_utility_1_1_pose.html#o1">theta</a> - subtrahend.<a class="code" href="struct_rm_utility_1_1_pose.html#o1">theta</a>;
00268         <span class="keywordflow">if</span> ( th &gt;= 360 ) th -= 360;
00269         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( th &lt;= -360 ) th += 360;
00270         <span class="keywordflow">return</span> <a class="code" href="struct_rm_utility_1_1_pose.html#a8">Pose</a>( <a class="code" href="struct_rm_utility_1_1_pose.html#o0">coord</a> - subtrahend.<a class="code" href="struct_rm_utility_1_1_pose.html#o0">coord</a>, th ); 
00271 }
00272 
00273 
<a name="l00274"></a><a class="code" href="struct_rm_utility_1_1_pose.html#a1">00274</a> <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a> <a class="code" href="struct_rm_utility_1_1_pose.html#a1">Pose::operator +</a>( <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a> &amp;addend )<span class="keyword"> const</span>
00275 <span class="keyword"></span>{
00276         <span class="keywordtype">double</span> th = <a class="code" href="struct_rm_utility_1_1_pose.html#o1">theta</a> + addend.<a class="code" href="struct_rm_utility_1_1_pose.html#o1">theta</a>;
00277         <span class="keywordflow">if</span> ( th &gt;= 360 ) th -= 360;
00278         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( th &lt;= -360 ) th += 360;
00279         <span class="keywordflow">return</span> <a class="code" href="struct_rm_utility_1_1_pose.html#a8">Pose</a>( <a class="code" href="struct_rm_utility_1_1_pose.html#o0">coord</a> + addend.<a class="code" href="struct_rm_utility_1_1_pose.html#o0">coord</a>, th );
00280 }
00281 
00282 <span class="comment">// Note: Doxygen doesn't like the RmUtility:: qualifier, but the linker requires it</span>
00283 std::ostream &amp;RmUtility::operator&lt;&lt;( std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="struct_rm_utility_1_1_pose.html">Pose</a> &amp;pose )
00284 {
00285         <span class="keywordflow">return</span> os &lt;&lt; pose.<a class="code" href="struct_rm_utility_1_1_pose.html#o0">coord</a> &lt;&lt; <span class="stringliteral">":"</span> &lt;&lt; pose.<a class="code" href="struct_rm_utility_1_1_pose.html#o1">theta</a>;
00286 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Apr 3 16:46:54 2005 for Robot Mapper by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
