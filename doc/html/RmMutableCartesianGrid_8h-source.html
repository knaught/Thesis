<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Robot Mapper: include/RmMutableCartesianGrid.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000001.html">include</a></div>
<h1>RmMutableCartesianGrid.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">// RmMutableCartesianGrid.h</span>
00002 
00003 <span class="preprocessor">#ifndef RM_MUTABLE_CARTESIAN_GRID_H</span>
00004 <span class="preprocessor"></span><span class="preprocessor">#define RM_MUTABLE_CARTESIAN_GRID_H</span>
00005 <span class="preprocessor"></span>
00006 <span class="preprocessor">#include &lt;fstream&gt;</span>
00007 <span class="preprocessor">#include "RmMutableMatrix.h"</span>
00008 <span class="preprocessor">#include "RmUtility.h"</span>
00009 <span class="preprocessor">#include "RmExceptions.h"</span>
00010 
00011 
00066 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00067"></a><a class="code" href="classRmMutableCartesianGrid.html">00067</a> <span class="keyword">class </span><a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid</a> : <span class="keyword">public</span> <a class="code" href="classRmMutableMatrix.html">RmMutableMatrix</a>&lt;T&gt;
00068 {
00069 <span class="keyword">public</span>:
00070 
<a name="l00072"></a><a class="code" href="classRmMutableCartesianGrid.html#w2">00072</a>         <span class="keyword">enum</span> <a class="code" href="classRmMutableCartesianGrid.html#w2">ExpansionMode</a> { 
00074                 Constrain, 
00076                 <a class="code" href="classRmMutableCartesianGrid.html#w2w1">Expand</a> 
00077         };
00078 
<a name="l00080"></a><a class="code" href="classRmMutableCartesianGrid.html#n0">00080</a>         <span class="keyword">friend</span> <span class="keyword">class </span>Operator2D&lt;T&gt;; 
00081 
00082 
<a name="l00093"></a><a class="code" href="classRmMutableCartesianGrid.html#a11">00093</a>         <a class="code" href="classRmMutableCartesianGrid.html#a11">RmMutableCartesianGrid</a>( <span class="keywordtype">int</span> w = 10, <span class="keywordtype">int</span> h = 10, 
00094                 <span class="keyword">const</span> <a class="code" href="classRmUtility_1_1Coord.html">RmUtility::Coord</a>&amp; globalOrigin = <a class="code" href="classRmUtility_1_1Coord.html">RmUtility::Coord</a>(0,0), <span class="keyword">const</span> T initVal = T() )
00095                 : <a class="code" href="classRmMutableMatrix.html">RmMutableMatrix</a>&lt;T&gt;( w, h, initVal ),
00096                   m_globalOrigin( globalOrigin ), m_expandMode( Expand ) { <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( w, h ); }
00097 
00098 
00102         <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid</a>&amp; <a class="code" href="classRmMutableCartesianGrid.html#a6">operator=</a>( <span class="keyword">const</span> <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid</a>&amp; source );
00103 
00104 
<a name="l00110"></a><a class="code" href="classRmMutableCartesianGrid.html#a13">00110</a>         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a13">setExpansionMode</a>( ExpansionMode mode ) { m_expandMode = mode; }
00111 
00112 
00117         <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a14">setOrigin</a>( <span class="keyword">const</span> RmUtility::Coord&amp; origin );
00118 
00119 
00124         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a10">resizeBy</a>( <span class="keywordtype">int</span> north, <span class="keywordtype">int</span> south, <span class="keywordtype">int</span> east, <span class="keywordtype">int</span> west );
00125 
00126 
00132         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a12">rotateBy</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> theta );
00133 
00134 
00138         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a15">trim</a>();
00139 
00140 
00149         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a16">trimTo</a>( <span class="keyword">const</span> <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> bound );
00150 
00151 
00155         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a1">copyInto</a>( <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid&lt;T&gt;</a>&amp; dest ) <span class="keyword">const</span>;
00156 
00157 
00162         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a5">mergeWith</a>( <span class="keyword">const</span> <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid&lt;T&gt;</a>&amp; m );
00163 
00164 
00185         T&amp; <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y );
00186 
00187 
00193         <span class="keyword">const</span> T&amp; <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y ) <span class="keyword">const</span>;
00194 
00195 
<a name="l00199"></a><a class="code" href="classRmMutableCartesianGrid.html#a4">00199</a>         <span class="keywordtype">bool</span> <a class="code" href="classRmMutableCartesianGrid.html#a4">inBounds</a>( <span class="keyword">const</span> RmUtility::Coord &amp;c )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classRmMutableCartesianGrid.html#a4">inBounds</a>( c.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>, c.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> ); }
00200 
00201 
00205         <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRmMutableCartesianGrid.html#a4">inBounds</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y ) <span class="keyword">const</span>;
00206 
00207 
<a name="l00211"></a><a class="code" href="classRmMutableCartesianGrid.html#a2">00211</a>         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a2">empty</a>() { <a class="code" href="classRmMutableMatrix.html#a1">RmMutableMatrix&lt;T&gt;::empty</a>(); <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( <a class="code" href="classRmMutableMatrix.html#a15">width</a>(), <a class="code" href="classRmMutableMatrix.html#a2">height</a>() ); }
00212 
00213 
<a name="l00219"></a><a class="code" href="classRmMutableCartesianGrid.html#a0">00219</a>         <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_globalBound; }
00220 
00221 
<a name="l00225"></a><a class="code" href="classRmMutableCartesianGrid.html#a7">00225</a>         RmUtility::Coord <a class="code" href="classRmMutableCartesianGrid.html#a7">origin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_globalOrigin; }
00226 
00227 
00234         std::ostream&amp; <a class="code" href="classRmMutableCartesianGrid.html#a9">put</a>( std::ostream&amp; os, <span class="keywordtype">bool</span> bound = <span class="keyword">true</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *format = NULL ) <span class="keyword">const</span>;
00235 
00236 
00241         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a9">put</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* filename, <span class="keywordtype">int</span> precision = 4 ) <span class="keyword">const</span>;
00242 
00243 <span class="keyword">protected</span>:
00244 
00249         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height );
00250 
00251 
00256         <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( RmUtility::Coord center );
00257 
00258 <span class="keyword">private</span>:
00259 
00261         RmUtility::Coord m_globalOrigin;
00262 
00264         RmUtility::Coord m_center;
00265 
00268         <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> m_globalBound;
00269 
00271         ExpansionMode m_expandMode;
00272 };
00273 
00274 
00275 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00276"></a><a class="code" href="classRmMutableCartesianGrid.html#a6">00276</a> <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid&lt;T&gt;</a>&amp; <a class="code" href="classRmMutableCartesianGrid.html#a6">RmMutableCartesianGrid&lt;T&gt;::operator=</a>( <span class="keyword">const</span> <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid</a>&amp; source )
00277 {
00278         <a class="code" href="classRmMutableMatrix.html#a4">RmMutableMatrix&lt;T&gt;::operator=</a>( source );
00279         m_globalOrigin = source.<a class="code" href="classRmMutableCartesianGrid.html#r3">m_globalOrigin</a>;
00280         m_center = source.<a class="code" href="classRmMutableCartesianGrid.html#r0">m_center</a>;
00281         m_globalBound = source.<a class="code" href="classRmMutableCartesianGrid.html#r2">m_globalBound</a>;
00282         m_expandMode = source.<a class="code" href="classRmMutableCartesianGrid.html#r1">m_expandMode</a>;
00283 
00284         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00285 }
00286 
00287 
00288 
00289 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00290"></a><a class="code" href="classRmMutableCartesianGrid.html#b1">00290</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#b1">RmMutableCartesianGrid&lt;T&gt;::initBounds</a>( <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height )
00291 {
00292         <span class="keywordtype">int</span> h = height - 1;
00293         <span class="keywordtype">int</span> w = width - 1;
00294         m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> = w / 2;
00295         m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> = h / 2;
00296         <span class="keywordtype">int</span> yt = h - m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> + m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a>;
00297         <span class="keywordtype">int</span> xr = w - m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> + m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>;
00298         <span class="keywordtype">int</span> xl = xr - w;
00299         <span class="keywordtype">int</span> yb = yt - h;
00300         m_globalBound = <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a>( xl, yt, xr, yb );
00301 }
00302 
00303 
00304 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00305"></a><a class="code" href="classRmMutableCartesianGrid.html#b0">00305</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#b1">RmMutableCartesianGrid&lt;T&gt;::initBounds</a>( <a class="code" href="classRmUtility_1_1Coord.html">RmUtility::Coord</a> center )
00306 {
00307         <span class="keywordtype">int</span> h = <a class="code" href="classRmMutableMatrix.html#a2">height</a>() - 1;
00308         <span class="keywordtype">int</span> w = <a class="code" href="classRmMutableMatrix.html#a15">width</a>() - 1;
00309         m_center = center;
00310         <span class="keywordtype">int</span> yt = h - m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> + m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a>;
00311         <span class="keywordtype">int</span> xr = w - m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> + m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>;
00312         <span class="keywordtype">int</span> xl = xr - w;
00313         <span class="keywordtype">int</span> yb = yt - h;
00314         m_globalBound = <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a>( xl, yt, xr, yb );
00315 }
00316 
00317 
00318 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00319"></a><a class="code" href="classRmMutableCartesianGrid.html#a14">00319</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a14">RmMutableCartesianGrid&lt;T&gt;::setOrigin</a>( <span class="keyword">const</span> <a class="code" href="classRmUtility_1_1Coord.html">RmUtility::Coord</a>&amp; origin )
00320 {
00321         m_globalOrigin = origin;
00322         <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( m_center );
00323 }
00324 
00325 
00326 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00327"></a><a class="code" href="classRmMutableCartesianGrid.html#a18">00327</a> T&amp; <a class="code" href="classRmMutableCartesianGrid.html#a18">RmMutableCartesianGrid&lt;T&gt;::valueAt</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y )
00328 {
00329         <span class="comment">// Note: The m_center is anchored to m_gobalOrigin</span>
00330         <span class="comment">// Growing the grid up or to the left leaves that center unchanged</span>
00331         <span class="comment">// Growing the grid down or to the right by distance delta shifts the center up or down by the</span>
00332         <span class="comment">// same delta</span>
00333 
00334         <span class="keywordtype">bool</span> expanded = <span class="keyword">false</span>;
00335 
00336         <span class="comment">// Convert local/global coords to matrix indices</span>
00337         <span class="keywordtype">int</span> localX = m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> + x - m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>;
00338         <span class="keywordtype">int</span> localY = m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> + y - m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a>;
00339 
00340         <span class="comment">// Expand grid as necessary and update bounds</span>
00341         <span class="comment">// ...left</span>
00342         <span class="keywordflow">if</span> ( localX &lt; 0 ) {
00343                 m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> += -localX;
00344                 m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x += localX;
00345                 expanded = <span class="keyword">true</span>;
00346         }
00347 
00348         <span class="comment">// ...right</span>
00349         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( localX &gt;= <a class="code" href="classRmMutableMatrix.html#a15">width</a>() ) {
00350                 m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x += localX - <a class="code" href="classRmMutableMatrix.html#a15">width</a>() + 1;
00351                 expanded = <span class="keyword">true</span>;
00352         }
00353 
00354         <span class="comment">// ...up</span>
00355         <span class="keywordflow">if</span> ( localY &gt;= <a class="code" href="classRmMutableMatrix.html#a2">height</a>() ) {
00356                 m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y += localY - <a class="code" href="classRmMutableMatrix.html#a2">height</a>() + 1;
00357                 expanded = <span class="keyword">true</span>;
00358         }
00359 
00360         <span class="comment">// ...down</span>
00361         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( localY &lt; 0 ) {
00362                 m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> += -localY;
00363                 m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y += localY;
00364                 expanded = <span class="keyword">true</span>;
00365         }
00366 
00367         <span class="keywordflow">if</span> ( expanded &amp;&amp; m_expandMode == Constrain ) {
00368                 <span class="keywordtype">char</span> buff[50];
00369                 sprintf( buff, <span class="stringliteral">"Index constraint: [%d..%d)[%d..%d); Requested index: [%d][%d]"</span>, 
00370                         m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x, m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x, m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y, m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y, x, y );
00371                 <span class="keywordflow">throw</span> <a class="code" href="structRmExceptions_1_1IndexOutOfBoundsException.html">RmExceptions::IndexOutOfBoundsException</a>( 
00372                         <span class="stringliteral">"RmMutableCartesianGrid&lt;T&gt;::valueAt()"</span>, buff );
00373         }
00374 
00375         <span class="comment">// Access grid using transposed coords</span>
00376         <span class="comment">// (from origin-lower-left to origin-upper-left)</span>
00377         <span class="keywordflow">return</span> <a class="code" href="classRmMutableMatrix.html#a14">RmMutableMatrix&lt;T&gt;::valueAt</a>( localX, <a class="code" href="classRmMutableMatrix.html#a2">height</a>() - localY - 1 );
00378 }
00379 
00380 
00381 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00382"></a><a class="code" href="classRmMutableCartesianGrid.html#a17">00382</a> <span class="keyword">const</span> T&amp; <a class="code" href="classRmMutableCartesianGrid.html#a18">RmMutableCartesianGrid&lt;T&gt;::valueAt</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y )<span class="keyword"> const</span>
00383 <span class="keyword"></span>{
00384         <span class="comment">// Note: The m_center is anchored to m_gobalOrigin</span>
00385         <span class="comment">// Growing the grid up or to the left leaves that center unchanged</span>
00386         <span class="comment">// Growing the grid down or to the right by distance delta shifts the center up or down by the </span>
00387         <span class="comment">// same delta</span>
00388 
00389         <span class="keywordtype">bool</span> expanded = <span class="keyword">false</span>;
00390 
00391         <span class="comment">// Convert local/global coords to matrix indices</span>
00392         <span class="keywordtype">int</span> localX = m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> + x - m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>;
00393         <span class="keywordtype">int</span> localY = m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> + y - m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a>;
00394 
00395         <span class="comment">// Expand grid as necessary and update bounds</span>
00396         <span class="comment">// ...left</span>
00397         <span class="keywordflow">if</span> ( localX &lt; 0 || localX &gt;= <a class="code" href="classRmMutableMatrix.html#a15">width</a>() || localY &gt;= <a class="code" href="classRmMutableMatrix.html#a2">height</a>() || localY &lt; 0 ) {
00398                 <span class="keywordtype">char</span> buff[50];
00399                 sprintf( buff, <span class="stringliteral">"Index constraint: [0..%d)[0..%d); Requested index: [%d][%d]"</span>, 
00400                         <a class="code" href="classRmMutableMatrix.html#a15">width</a>(), <a class="code" href="classRmMutableMatrix.html#a2">height</a>(), x, y );
00401                 <span class="keywordflow">throw</span> <a class="code" href="structRmExceptions_1_1IndexOutOfBoundsException.html">RmExceptions::IndexOutOfBoundsException</a>( <span class="stringliteral">"RmMutableCartesianGrid&lt;T&gt;::valueAt() const"</span>, buff );
00402         }
00403 
00404         <span class="comment">// Access grid using transposed coords</span>
00405         <span class="comment">// (from origin-lower-left to origin-upper-left)</span>
00406         <span class="keywordflow">return</span> <a class="code" href="classRmMutableMatrix.html#a14">RmMutableMatrix&lt;T&gt;::valueAt</a>(localX, <a class="code" href="classRmMutableMatrix.html#a2">height</a>() - localY - 1);
00407 }
00408 
00409 
00410 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00411"></a><a class="code" href="classRmMutableCartesianGrid.html#a3">00411</a> <span class="keywordtype">bool</span> <a class="code" href="classRmMutableCartesianGrid.html#a4">RmMutableCartesianGrid&lt;T&gt;::inBounds</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y )<span class="keyword"> const</span>
00412 <span class="keyword"></span>{
00413         <span class="keywordflow">return</span> x &gt;= m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x &amp;&amp; x &lt;= m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x &amp;&amp;
00414                 y &lt;= m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y &amp;&amp; y &gt;= m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y;
00415 }
00416 
00417 
00418 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00419"></a><a class="code" href="classRmMutableCartesianGrid.html#a12">00419</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a12">RmMutableCartesianGrid&lt;T&gt;::rotateBy</a>( <span class="keyword">const</span> <span class="keywordtype">double</span> theta )
00420 {
00422         <span class="comment">// Resize grid such that origin is in physical center</span>
00423 
00424         <span class="comment">// find furthest boundary from origin</span>
00425         <span class="keywordtype">int</span> temp;
00426         <span class="keywordtype">int</span> horizMax = (temp = <a class="code" href="classRmMutableMatrix.html#a15">width</a>()-1 - m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>) &gt; m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> ? temp : m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a>;
00427         <span class="keywordtype">int</span> vertMax = (temp = <a class="code" href="classRmMutableMatrix.html#a2">height</a>()-1 - m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a>) &gt; m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> ? temp : m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a>;
00428                 <span class="comment">// Note: use the max of these two to square the grid about its center</span>
00429 
00430         <span class="comment">// punch out boundaries by that distance from the center</span>
00431         <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> - horizMax, m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> + vertMax );
00432         <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> + horizMax, m_globalOrigin.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> - vertMax );
00433 
00434 
00436         <span class="comment">// Rotate</span>
00437 
00438         <a class="code" href="classRmMutableMatrix.html#a10">RmMutableMatrix&lt;T&gt;::rotateBy</a>( theta );
00439 
00440         <span class="comment">// accommodate resizing that resulted from rotation</span>
00441         <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( <a class="code" href="classRmMutableMatrix.html#a15">width</a>(), <a class="code" href="classRmMutableMatrix.html#a2">height</a>() );
00442 }
00443 
00444 
00445 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00446"></a><a class="code" href="classRmMutableCartesianGrid.html#a15">00446</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a15">RmMutableCartesianGrid&lt;T&gt;::trim</a>()
00447 {
00448         <span class="keyword">const</span> T <a class="code" href="classRmMutableCartesianGrid.html#a2">empty</a> = <a class="code" href="classRmMutableMatrix.html#a3">initValue</a>();
00449         <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> inner( m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>, m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a> ); 
00450                 <span class="comment">// reversed intentionally to force update</span>
00451 
00452         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> y = m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y; y &gt; m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y; --y ) {
00453                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> x = m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x; x &lt; m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x; ++x ) {
00454                         <span class="keywordflow">if</span> ( <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( x, y ) != empty ) {
00455                                 <span class="keywordflow">if</span> ( x &lt; inner.ul.x ) inner.ul.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> = x;
00456                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( x &gt; inner.lr.x ) inner.lr.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> = x;
00457                                 <span class="keywordflow">if</span> ( y &gt; inner.ul.y ) inner.ul.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> = y;
00458                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( y &lt; inner.lr.y ) inner.lr.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> = y;
00459                         }
00460                 }
00461         }
00462 
00463         <a class="code" href="classRmMutableCartesianGrid.html#a10">resizeBy</a>( inner.ul.y - m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y, m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y - inner.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y, 
00464                 inner.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x - m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x, m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x - inner.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x );
00465 }
00466 
00467 
00468 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00469"></a><a class="code" href="classRmMutableCartesianGrid.html#a16">00469</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a16">RmMutableCartesianGrid&lt;T&gt;::trimTo</a>( <span class="keyword">const</span> <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> bound )
00470 {
00471         <span class="keywordtype">int</span> n = bound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y - m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y;
00472         <span class="keywordflow">if</span> ( n &gt; 0 ) n = 0;
00473         <span class="keywordtype">int</span> s = m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y - bound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y;
00474         <span class="keywordflow">if</span> ( s &gt; 0 ) s = 0;
00475         <span class="keywordtype">int</span> e = bound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x - m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x;
00476         <span class="keywordflow">if</span> ( e &gt; 0 ) e = 0;
00477         <span class="keywordtype">int</span> w = m_globalBound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x - bound.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x;
00478         <span class="keywordflow">if</span> ( w &gt; 0 ) w = 0;
00479 
00480         <a class="code" href="classRmMutableCartesianGrid.html#a10">resizeBy</a>( n, s, e, w );
00481 }
00482 
00483 
00484 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00485"></a><a class="code" href="classRmMutableCartesianGrid.html#a1">00485</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a1">RmMutableCartesianGrid&lt;T&gt;::copyInto</a>( <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid&lt;T&gt;</a>&amp; dest )<span class="keyword"> const</span>
00486 <span class="keyword"></span>{
00487         <span class="comment">// Get requested bounds as fit within this grid</span>
00488         <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>( dest.<a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>() );
00489         <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#a5">intersectWith</a>( m_globalBound );
00490 
00491         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> y = <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y; y &gt;= <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y; --y ) {
00492                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> x = <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x; x &lt;= <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x; ++x ) {
00493                         <span class="keyword">const</span> T v = <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( x, y ); <span class="comment">// make copy</span>
00494                         dest.<a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( x, y ) = v;
00495                 }
00496         }
00497 }
00498 
00499 
00500 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00501"></a><a class="code" href="classRmMutableCartesianGrid.html#a5">00501</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a5">RmMutableCartesianGrid&lt;T&gt;::mergeWith</a>( <span class="keyword">const</span> <a class="code" href="classRmMutableCartesianGrid.html">RmMutableCartesianGrid&lt;T&gt;</a>&amp; m )
00502 {
00503         <span class="keyword">const</span> T <a class="code" href="classRmMutableCartesianGrid.html#a2">empty</a> = <a class="code" href="classRmMutableMatrix.html#a3">initValue</a>();
00504         <span class="keyword">const</span> <a class="code" href="structRmUtility_1_1BoundBox.html">RmUtility::BoundBox</a> <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>( m.<a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>() );
00505         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> y = <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.y; y &gt;= <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.y; --y ) {
00506                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> x = <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o1">ul</a>.x; x &lt;= <a class="code" href="classRmMutableCartesianGrid.html#a0">bound</a>.<a class="code" href="structRmUtility_1_1BoundBox.html#o0">lr</a>.x; ++x ) {
00507                         <span class="keyword">const</span> T v = m.<a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( x, y );
00508                         <span class="keywordflow">if</span> ( v != empty ) <a class="code" href="classRmMutableCartesianGrid.html#a18">valueAt</a>( x, y ) = v;
00509                 }
00510         }
00511 }
00512 
00513 
00514 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00515"></a><a class="code" href="classRmMutableCartesianGrid.html#a10">00515</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a10">RmMutableCartesianGrid&lt;T&gt;::resizeBy</a>( <span class="keywordtype">int</span> north, <span class="keywordtype">int</span> south, <span class="keywordtype">int</span> east, <span class="keywordtype">int</span> west )
00516 {
00517         <a class="code" href="classRmMutableMatrix.html#a8">RmMutableMatrix&lt;T&gt;::resizeBy</a>( north, south, east, west );
00518 
00519         <a class="code" href="classRmMutableCartesianGrid.html#b1">initBounds</a>( <a class="code" href="classRmUtility_1_1Coord.html">RmUtility::Coord</a>( m_center.<a class="code" href="classRmUtility_1_1Coord.html#o0">x</a> + west, m_center.<a class="code" href="classRmUtility_1_1Coord.html#o1">y</a> + south ) );
00520 }
00521 
00522 
00523 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00524"></a><a class="code" href="classRmMutableCartesianGrid.html#a9">00524</a> std::ostream&amp; <a class="code" href="classRmMutableCartesianGrid.html#a9">RmMutableCartesianGrid&lt;T&gt;::put</a>( 
00525         std::ostream&amp; os, <span class="keywordtype">bool</span> bound, <span class="keyword">const</span> <span class="keywordtype">char</span> *format )<span class="keyword"> const</span>
00526 <span class="keyword"></span>{
00527         <span class="keywordflow">if</span> ( bound ) os &lt;&lt; m_globalBound &lt;&lt; <span class="stringliteral">"\n"</span>;
00528         <span class="keywordflow">return</span> <a class="code" href="classRmMutableMatrix.html#a7">RmMutableMatrix&lt;T&gt;::put</a>( os, format ); 
00529 }
00530 
00531 
00532 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00533"></a><a class="code" href="classRmMutableCartesianGrid.html#a8">00533</a> <span class="keywordtype">void</span> <a class="code" href="classRmMutableCartesianGrid.html#a9">RmMutableCartesianGrid&lt;T&gt;::put</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* filename, <span class="keywordtype">int</span> precision )<span class="keyword"> const</span>
00534 <span class="keyword"></span>{
00535         std::ofstream ofs( filename );
00536         ofs.setf( std::ios_base::fixed, std::ios_base::floatfield );
00537         ofs.precision( precision );
00538         <a class="code" href="classRmMutableCartesianGrid.html#a9">put</a>( ofs, <span class="keyword">true</span> );
00539         ofs.close();
00540 }
00541 
00542 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 1 23:40:03 2005 for Robot Mapper by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
