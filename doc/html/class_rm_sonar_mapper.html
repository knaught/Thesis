<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Robot Mapper: RmSonarMapper Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>RmSonarMapper Class Reference</h1>Processes sonar range readings as they are received from a Pioneer robot or simulator, mapping them to a <a class="el" href="class_rm_sonar_map.html">RmSonarMap</a> and records them to file.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>&gt;</code>
<p>
<p>Inheritance diagram for RmSonarMapper:
<p><center><img src="class_rm_sonar_mapper.png" usemap="#RmSonarMapper_map" border="0" alt=""></center>
<map name="RmSonarMapper_map">
<area href="class_rm_action_handler.html" alt="RmActionHandler" shape="rect" coords="0,0,110,24">
</map>
<a href="class_rm_sonar_mapper-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#w3">UpdateType</a> { <a class="el" href="class_rm_sonar_mapper.html#w3w1">None</a>, 
<a class="el" href="class_rm_sonar_mapper.html#w3w0">Distance</a>, 
<a class="el" href="class_rm_sonar_mapper.html#w3w2">Turn</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Identifies the type of trigger that caused an update.  <a href="#w3">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a0">handleAction</a> (ArRobot *robot)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Designed to be called as part of the real-time ActionHook::fire() event sequence.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a1">mapReading</a> (<a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> *reading, const int sonarNumber)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processing one range reading per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="struct_rm_settings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="struct_rm_settings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar sweep that represents all readings collected within the interval.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a2">mapReadings</a> (<a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;readings)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processing an entire sonar sweep per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="struct_rm_settings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="struct_rm_settings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar reading that represents all readings collected within the interval.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a3">reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the internal state such that processing of in-progress sonar readings (via <a class="el" href="class_rm_sonar_mapper.html#a1">mapReading()</a>) is terminated and reset for a new reading.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a4">RmSonarMapper</a> (const <a class="el" href="struct_rm_settings.html">RmSettings</a> &amp;s, <a class="el" href="class_rm_sonar_map.html">RmSonarMap</a> *m)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the object, setting it up as a handler for sonar data directly fed via <a class="el" href="class_rm_sonar_mapper.html#a1">mapReading()</a>.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a5">RmSonarMapper</a> (const <a class="el" href="struct_rm_settings.html">RmSettings</a> &amp;s, std::ofstream &amp;sonarOut, <a class="el" href="class_rm_sonar_map.html">RmSonarMap</a> *m, RmServer *rs=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the object, setting it up as a handler for the generic ActionHook event listener, creating a sonar map and sonar data output file.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a6">setRemoteViewServer</a> (RmServer *rs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assigns the server that will be serving map viewer strings (generated by this mapper).  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_rm_sonar_mapper.html#w3">UpdateType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#a7">updateTriggered</a> (const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;pose)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if an update to the sonar map should be made.  <a href="#a7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#b0">readingFrom</a> (std::vector&lt; <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &gt; &amp;collection)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a single SonarReading that represents the given collection of readings.  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#b1">saveReadings</a> (const <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;readings)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the given data to the sonar data file opened during construction, formatting as text, with a space separating each value.  <a href="#b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_sonar_mapper.html#b2">updateUsing</a> (<a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> *reading, const int sonarNumber=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the sonar map using the given collection of sonar readings.  <a href="#b2"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Processes sonar range readings as they are received from a Pioneer robot or simulator, mapping them to a <a class="el" href="class_rm_sonar_map.html">RmSonarMap</a> and records them to file. 
<p>
Installs and initializes a connection to a Pioneer robot, or Pioneer simulator if a robot connection is unavailable, via the Aria robot controller API, serves as the dispatcher of all mapping activity in response to real or simulated robot actions, and logs robot pose and sonar range reading data to the log file provided at construction. Optionally, the mapped occupancy grid and specialized expectation-maximization data is written to two additional log files. <h3>Usage</h3>
<p>
Use this when live sonar data is to be collected from a robot or simulator connection and not from a previously recorded sonar data file. The following example demonstrates how a RmSonarMapper might be set up and a sonar log file generated. <pre>
 1    #include &lt;fstream&gt;
 4    #include "PioneerController/RmPioneerController.h"
 2    #include "RmSettings.h"
 3    #include "RmGlobalMap.h"
 4
 5    <a class="el" href="struct_rm_settings.html">RmSettings</a> settings;
 6    std::ofstream sonarStream( "sonar.dat" );
 7    <a class="el" href="class_rm_global_map.html">RmGlobalMap</a> map( &amp;s );
 8    RmSonarMapper sonarMapper( settings, sonarStream, &amp;map );
 9    <a class="el" href="class_rm_pioneer_controller.html">RmPioneerController</a> robot( false, true, &amp;sonarMapper );
 </pre> Lines 5-7 prepare the parameters given in line 8, which with line 9, is where all the work is actually done. The range data retrieved from the robot (configured for synchronous key-drive operation) will be mapped to the <a class="el" href="class_rm_global_map.html">RmGlobalMap</a> created in line 7, and raw range data written to the file opened in line 6. <h3>Dependencies</h3>
<p>
This class implements the <a class="el" href="class_rm_action_handler.html">RmActionHandler</a> interface. Grid and log file updates are restricted via <a class="el" href="struct_rm_settings.html#o2">RmSettings::CellSize</a> to occuring once per grid cell traveled. The class also makes use of <a class="el" href="class_rm_utility_1_1_coord.html">RmUtility::Coord</a>, <a class="el" href="struct_rm_utility_1_1_mapped_sonar_reading.html">RmUtility::MappedSonarReading</a>, <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a>, and <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a>. 
<p>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8h-source.html#l00054">54</a> of file <a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w3" doxytag="RmSonarMapper::UpdateType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="class_rm_sonar_mapper.html#w3">RmSonarMapper::UpdateType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Identifies the type of trigger that caused an update. 
<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="w3w1" doxytag="None"></a>None</em>&nbsp;</td><td>
No update was triggered. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="w3w0" doxytag="Distance"></a>Distance</em>&nbsp;</td><td>
An update was triggered by a max distance of travel being reached. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="w3w2" doxytag="Turn"></a>Turn</em>&nbsp;</td><td>
An update was triggered by a max degree of turn being reached. </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8h-source.html#l00059">59</a> of file <a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00126">updateTriggered()</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a5" doxytag="RmSonarMapper::RmSonarMapper"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RmSonarMapper::RmSonarMapper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_settings.html">RmSettings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>std::ofstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sonarOut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_rm_sonar_map.html">RmSonarMap</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>RmServer *&nbsp;</td>
          <td class="mdname" nowrap> <em>rs</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the object, setting it up as a handler for the generic ActionHook event listener, creating a sonar map and sonar data output file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>specifies <a class="el" href="struct_rm_settings.html#o2">RmSettings::CellSize</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sonarOut</em>&nbsp;</td><td>the file to which robot pose and sonar range reading data is written </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>the map for which <a class="el" href="class_rm_sonar_map.html#a5">RmSonarMap::update()</a> will be called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rs</em>&nbsp;</td><td>the server that will be serving map viewer strings (generated by this mapper)</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8h-source.html#l00080">80</a> of file <a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="RmSonarMapper::RmSonarMapper"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RmSonarMapper::RmSonarMapper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_settings.html">RmSettings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="class_rm_sonar_map.html">RmSonarMap</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the object, setting it up as a handler for sonar data directly fed via <a class="el" href="class_rm_sonar_mapper.html#a1">mapReading()</a>. 
<p>
Use this in place of the full constructor as a means for processing static file data.
<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8h-source.html#l00089">89</a> of file <a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0" doxytag="RmSonarMapper::handleAction"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::handleAction           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ArRobot *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>robot</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Designed to be called as part of the real-time ActionHook::fire() event sequence. 
<p>
Forwards robot pose and range reading data on to handleReading(). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>robot</em>&nbsp;</td><td>the ArRobot passed to <a class="el" href="class_rm_action_hook.html#a0">RmActionHook::fire()</a></td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="class_rm_action_handler.html#a0">RmActionHandler</a>.
<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00013">13</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00074">mapReadings()</a>, and <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00107">saveReadings()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="RmSonarMapper::mapReading"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::string RmSonarMapper::mapReading           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>reading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const int&nbsp;</td>
          <td class="mdname" nowrap> <em>sonarNumber</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Processing one range reading per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="struct_rm_settings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="struct_rm_settings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar sweep that represents all readings collected within the interval. 
<p>
Each call steps through this sweep one range reading at a time. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>reading</em>&nbsp;</td><td>the complete sonar sweep; if null, resets the internal state such that the <em>next</em> call will process the first range reading, and returns an empty string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sonarNumber</em>&nbsp;</td><td>the specific sonar within the sweep to be mapped</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00021">21</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00329">RmUtility::SonarReading::all</a>, <a class="el" href="class_rm_sonar_mapper.html#w3w0">Distance</a>, <a class="el" href="_rm_utility_8h-source.html#l00326">RmUtility::SonarReading::distance</a>, <a class="el" href="class_rm_sonar_mapper.html#w3w1">None</a>, <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00158">readingFrom()</a>, <a class="el" href="_rm_utility_8h-source.html#l00320">RmUtility::SonarReading::robotPose</a>, <a class="el" href="_rm_utility_8h-source.html#l00323">RmUtility::SonarReading::sonarNumber</a>, <a class="el" href="class_rm_sonar_mapper.html#w3w2">Turn</a>, <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00126">updateTriggered()</a>, and <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00192">updateUsing()</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8h-source.html#l00146">reset()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="RmSonarMapper::mapReadings"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RmSonarMapper::mapReadings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>readings</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Processing an entire sonar sweep per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="struct_rm_settings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="struct_rm_settings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar reading that represents all readings collected within the interval. 
<p>
Records pose and sonar data (if an output file was provided during construction). <dl compact><dt><b>Returns:</b></dt><dd>true if an actual update to the sonar map was made</dd></dl>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00074">74</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="class_rm_sonar_mapper.html#w3w0">Distance</a>, <a class="el" href="class_rm_sonar_mapper.html#w3w1">None</a>, <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00158">readingFrom()</a>, <a class="el" href="_rm_utility_8h-source.html#l00320">RmUtility::SonarReading::robotPose</a>, <a class="el" href="class_rm_sonar_mapper.html#w3w2">Turn</a>, <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00126">updateTriggered()</a>, and <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00192">updateUsing()</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00013">handleAction()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="RmSonarMapper::readingFrom"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_rm_utility_1_1_sonar_reading.html">SonarReading</a> * RmSonarMapper::readingFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>collection</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a single SonarReading that represents the given collection of readings. 
<p>
This reading is compiled by taking the shortest of all sonar readings for each sonar. <dl compact><dt><b>Returns:</b></dt><dd>null if the collection is empty, representative reading otherwise</dd></dl>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00158">158</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00329">RmUtility::SonarReading::all</a>, and <a class="el" href="_rm_utility_8h-source.html#l00320">RmUtility::SonarReading::robotPose</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00021">mapReading()</a>, and <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00074">mapReadings()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="RmSonarMapper::reset"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the internal state such that processing of in-progress sonar readings (via <a class="el" href="class_rm_sonar_mapper.html#a1">mapReading()</a>) is terminated and reset for a new reading. 
<p>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8h-source.html#l00146">146</a> of file <a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>.
<p>
References <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00021">mapReading()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="RmSonarMapper::saveReadings"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::saveReadings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>readings</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the given data to the sonar data file opened during construction, formatting as text, with a space separating each value. 
<p>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00107">107</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00329">RmUtility::SonarReading::all</a>, <a class="el" href="_rm_utility_8h-source.html#l00245">RmUtility::Pose::coord</a>, <a class="el" href="_rm_utility_8h-source.html#l00320">RmUtility::SonarReading::robotPose</a>, <a class="el" href="_rm_utility_8h-source.html#l00248">RmUtility::Pose::theta</a>, <a class="el" href="_rm_utility_8h-source.html#l00068">RmUtility::Coord::x</a>, and <a class="el" href="_rm_utility_8h-source.html#l00071">RmUtility::Coord::y</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00013">handleAction()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="RmSonarMapper::setRemoteViewServer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::setRemoteViewServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">RmServer *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>rs</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Assigns the server that will be serving map viewer strings (generated by this mapper). 
<p>
As map update strings are received from the <a class="el" href="class_rm_sonar_map.html">RmSonarMap</a>, this server is used to forward them on to its client.
<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8h-source.html#l00130">130</a> of file <a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="RmSonarMapper::updateTriggered"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="class_rm_sonar_mapper.html#w3">RmSonarMapper::UpdateType</a> RmSonarMapper::updateTriggered           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pose</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if an update to the sonar map should be made. 
<p>
Determination is based upon the distance traveled and degree of turn made since the last update. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pose</em>&nbsp;</td><td>the last reported robot pose</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00126">126</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00245">RmUtility::Pose::coord</a>, <a class="el" href="_rm_settings_8h-source.html#l00117">RmSettings::MaxCollectionDegrees</a>, <a class="el" href="_rm_settings_8h-source.html#l00113">RmSettings::MaxCollectionDistance</a>, <a class="el" href="_rm_utility_8h-source.html#l00248">RmUtility::Pose::theta</a>, <a class="el" href="_rm_sonar_mapper_8h-source.html#l00059">UpdateType</a>, <a class="el" href="_rm_utility_8h-source.html#l00068">RmUtility::Coord::x</a>, and <a class="el" href="_rm_utility_8h-source.html#l00071">RmUtility::Coord::y</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00021">mapReading()</a>, and <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00074">mapReadings()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="RmSonarMapper::updateUsing"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::string RmSonarMapper::updateUsing           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>reading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const int&nbsp;</td>
          <td class="mdname" nowrap> <em>sonarNumber</em> = <code>-1</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Updates the sonar map using the given collection of sonar readings. 
<p>
At present, takes the last reading in the collection as the representative reading.
<p>
Definition at line <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00192">192</a> of file <a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00329">RmUtility::SonarReading::all</a>, <a class="el" href="_rm_utility_8h-source.html#l00326">RmUtility::SonarReading::distance</a>, <a class="el" href="_rm_utility_8h-source.html#l00323">RmUtility::SonarReading::sonarNumber</a>, and <a class="el" href="class_rm_sonar_map.html#a5">RmSonarMap::update()</a>.
<p>
Referenced by <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00021">mapReading()</a>, and <a class="el" href="_rm_sonar_mapper_8cpp-source.html#l00074">mapReadings()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="_rm_sonar_mapper_8h-source.html">RmSonarMapper.h</a><li>src/<a class="el" href="_rm_sonar_mapper_8cpp-source.html">RmSonarMapper.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Apr 3 16:46:54 2005 for Robot Mapper by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
