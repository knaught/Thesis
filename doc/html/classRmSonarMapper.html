<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Robot Mapper: RmSonarMapper Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>RmSonarMapper Class Reference</h1>Processes sonar range readings as they are received from a Pioneer robot or simulator, mapping them to a <a class="el" href="classRmSonarMap.html">RmSonarMap</a> and recording them to file.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>&gt;</code>
<p>
<p>Inheritance diagram for RmSonarMapper:
<p><center><img src="classRmSonarMapper.png" usemap="#RmSonarMapper_map" border="0" alt=""></center>
<map name="RmSonarMapper_map">
<area href="classRmActionHandler.html" alt="RmActionHandler" shape="rect" coords="0,0,110,24">
</map>
<a href="classRmSonarMapper-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#w3">UpdateType</a> { <a class="el" href="classRmSonarMapper.html#w3w1">None</a>, 
<a class="el" href="classRmSonarMapper.html#w3w0">Distance</a>, 
<a class="el" href="classRmSonarMapper.html#w3w2">Turn</a>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Identifies the type of trigger that caused an update.  <a href="#w3">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a0">handleAction</a> (ArRobot *robot)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Designed to be called as part of the real-time ActionHook::fire() event sequence.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a1">mapReading</a> (<a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> *reading, const int sonarNumber)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processing one range reading per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="structRmSettings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="structRmSettings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar sweep that represents all readings collected within the interval.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a2">mapReadings</a> (<a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> &amp;readings)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processing an entire sonar sweep per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="structRmSettings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="structRmSettings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar reading that represents all readings collected within the interval.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a3">reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the internal state such that processing of in-progress sonar readings (via <a class="el" href="classRmSonarMapper.html#a1">mapReading()</a>) is terminated and reset for a new reading.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a4">RmSonarMapper</a> (const <a class="el" href="structRmSettings.html">RmSettings</a> &amp;s, <a class="el" href="classRmSonarMap.html">RmSonarMap</a> *m)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the object, setting it up as a handler for sonar data directly fed via <a class="el" href="classRmSonarMapper.html#a1">mapReading()</a>.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a5">RmSonarMapper</a> (const <a class="el" href="structRmSettings.html">RmSettings</a> &amp;s, std::ofstream &amp;sonarOut, <a class="el" href="classRmSonarMap.html">RmSonarMap</a> *m, <a class="el" href="classRmServer.html">RmServer</a> *rs=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the object, setting it up as a handler for the generic ActionHook event listener, creating a sonar map and sonar data output file.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a6">setRemoteViewServer</a> (<a class="el" href="classRmServer.html">RmServer</a> *rs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assigns the server that will be serving map viewer strings (generated by this mapper).  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classRmSonarMapper.html#w3">UpdateType</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#a7">updateTriggered</a> (const <a class="el" href="structRmUtility_1_1Pose.html">RmUtility::Pose</a> &amp;pose)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if an update to the sonar map should be made.  <a href="#a7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#b0">readingFrom</a> (std::vector&lt; <a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> &gt; &amp;collection)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a single SonarReading that represents the given collection of readings.  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#b1">saveReadings</a> (const ArPose &amp;pose, const <a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> &amp;readings)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the given data to the sonar data file opened during construction, formatting as text, with a space separating each value.  <a href="#b1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRmSonarMapper.html#b2">updateUsing</a> (<a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> *reading, const int sonarNumber=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the sonar map using the given collection of sonar readings.  <a href="#b2"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Processes sonar range readings as they are received from a Pioneer robot or simulator, mapping them to a <a class="el" href="classRmSonarMap.html">RmSonarMap</a> and recording them to file. 
<p>
Installs and initializes a connection to a Pioneer robot, or Pioneer simulator if a robot connection is unavailable, via the Aria robot controller API; serves as the dispatcher of all mapping activity in response to real or simulated robot actions, and logs robot pose and sonar range reading data to the log file provided at construction. 
<p>

<p>
Definition at line <a class="el" href="RmSonarMapper_8h-source.html#l00025">25</a> of file <a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w3" doxytag="RmSonarMapper::UpdateType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="classRmSonarMapper.html#w3">RmSonarMapper::UpdateType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Identifies the type of trigger that caused an update. 
<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="w3w1" doxytag="None"></a>None</em>&nbsp;</td><td>
No update was triggered. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="w3w0" doxytag="Distance"></a>Distance</em>&nbsp;</td><td>
An update was triggered by a max distance of travel being reached. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="w3w2" doxytag="Turn"></a>Turn</em>&nbsp;</td><td>
An update was triggered by a max degree of turn being reached. </td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="RmSonarMapper_8h-source.html#l00030">30</a> of file <a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8cpp-source.html#l00129">updateTriggered()</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a5" doxytag="RmSonarMapper::RmSonarMapper"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RmSonarMapper::RmSonarMapper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structRmSettings.html">RmSettings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>std::ofstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sonarOut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classRmSonarMap.html">RmSonarMap</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classRmServer.html">RmServer</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>rs</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the object, setting it up as a handler for the generic ActionHook event listener, creating a sonar map and sonar data output file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>specifies <a class="el" href="structRmSettings.html#o2">RmSettings::CellSize</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sonarOut</em>&nbsp;</td><td>the file to which robot pose and sonar range reading data is written </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>the map for which <a class="el" href="classRmSonarMap.html#a5">RmSonarMap::update()</a> will be called </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rs</em>&nbsp;</td><td>the server that will be serving map viewer strings (generated by this mapper)</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="RmSonarMapper_8h-source.html#l00052">52</a> of file <a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="RmSonarMapper::RmSonarMapper"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RmSonarMapper::RmSonarMapper           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structRmSettings.html">RmSettings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classRmSonarMap.html">RmSonarMap</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the object, setting it up as a handler for sonar data directly fed via <a class="el" href="classRmSonarMapper.html#a1">mapReading()</a>. 
<p>
Use this in place of the full constructor as a means for processing static file data.
<p>
Definition at line <a class="el" href="RmSonarMapper_8h-source.html#l00061">61</a> of file <a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0" doxytag="RmSonarMapper::handleAction"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::handleAction           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ArRobot *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>robot</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Designed to be called as part of the real-time ActionHook::fire() event sequence. 
<p>
Forwards robot pose and range reading data on to handleReading(). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>robot</em>&nbsp;</td><td>the ArRobot passed to <a class="el" href="classRmActionHook.html#a0">RmActionHook::fire()</a></td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classRmActionHandler.html#a0">RmActionHandler</a>.
<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00012">12</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="RmSonarMapper_8cpp-source.html#l00074">mapReadings()</a>, and <a class="el" href="RmSonarMapper_8cpp-source.html#l00107">saveReadings()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="RmSonarMapper::mapReading"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::string RmSonarMapper::mapReading           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>reading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const int&nbsp;</td>
          <td class="mdname" nowrap> <em>sonarNumber</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Processing one range reading per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="structRmSettings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="structRmSettings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar sweep that represents all readings collected within the interval. 
<p>
Each call steps through this sweep one range reading at a time. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>reading</em>&nbsp;</td><td>the complete sonar sweep; if null, resets the internal state such that the <em>next</em> call will process the first range reading, and returns an empty string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sonarNumber</em>&nbsp;</td><td>the specific sonar within the sweep to be mapped</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00020">20</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="RmUtility_8h-source.html#l00292">RmUtility::SonarReading::all</a>, <a class="el" href="classRmSonarMapper.html#w3w0">Distance</a>, <a class="el" href="RmUtility_8h-source.html#l00289">RmUtility::SonarReading::distance</a>, <a class="el" href="classRmSonarMapper.html#w3w1">None</a>, <a class="el" href="RmSonarMapper_8cpp-source.html#l00157">readingFrom()</a>, <a class="el" href="RmUtility_8h-source.html#l00283">RmUtility::SonarReading::robotPose</a>, <a class="el" href="RmUtility_8h-source.html#l00286">RmUtility::SonarReading::sonarNumber</a>, <a class="el" href="classRmSonarMapper.html#w3w2">Turn</a>, <a class="el" href="RmSonarMapper_8cpp-source.html#l00129">updateTriggered()</a>, and <a class="el" href="RmSonarMapper_8cpp-source.html#l00187">updateUsing()</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8h-source.html#l00118">reset()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="RmSonarMapper::mapReadings"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool RmSonarMapper::mapReadings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>readings</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Processing an entire sonar sweep per call, updates the sonar map once per distance/degree interval (as determined by <a class="el" href="structRmSettings.html#o10">RmSettings::MaxCollectionDistance</a> and <a class="el" href="structRmSettings.html#o9">RmSettings::MaxCollectionDegrees</a>) with a single sonar reading that represents all readings collected within the interval. 
<p>
Records pose and sonar data (if an output file was provided during construction). <dl compact><dt><b>Returns:</b></dt><dd>true if an actual update to the sonar map was made</dd></dl>

<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00074">74</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="classRmSonarMapper.html#w3w0">Distance</a>, <a class="el" href="classRmSonarMapper.html#w3w1">None</a>, <a class="el" href="RmSonarMapper_8cpp-source.html#l00157">readingFrom()</a>, <a class="el" href="RmUtility_8h-source.html#l00283">RmUtility::SonarReading::robotPose</a>, <a class="el" href="classRmSonarMapper.html#w3w2">Turn</a>, <a class="el" href="RmSonarMapper_8cpp-source.html#l00129">updateTriggered()</a>, and <a class="el" href="RmSonarMapper_8cpp-source.html#l00187">updateUsing()</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8cpp-source.html#l00012">handleAction()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="RmSonarMapper::readingFrom"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="structRmUtility_1_1SonarReading.html">SonarReading</a> * RmSonarMapper::readingFrom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::vector&lt; <a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>collection</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a single SonarReading that represents the given collection of readings. 
<p>
This reading is compiled by taking the shortest of all sonar readings for each sonar. <dl compact><dt><b>Returns:</b></dt><dd>null if the collection is empty, representative reading otherwise</dd></dl>

<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00157">157</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="RmUtility_8h-source.html#l00292">RmUtility::SonarReading::all</a>, and <a class="el" href="RmUtility_8h-source.html#l00283">RmUtility::SonarReading::robotPose</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8cpp-source.html#l00020">mapReading()</a>, and <a class="el" href="RmSonarMapper_8cpp-source.html#l00074">mapReadings()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="RmSonarMapper::reset"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the internal state such that processing of in-progress sonar readings (via <a class="el" href="classRmSonarMapper.html#a1">mapReading()</a>) is terminated and reset for a new reading. 
<p>

<p>
Definition at line <a class="el" href="RmSonarMapper_8h-source.html#l00118">118</a> of file <a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>.
<p>
References <a class="el" href="RmSonarMapper_8cpp-source.html#l00020">mapReading()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="RmSonarMapper::saveReadings"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::saveReadings           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const ArPose &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>pose</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>readings</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the given data to the sonar data file opened during construction, formatting as text, with a space separating each value. 
<p>

<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00107">107</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="RmUtility_8h-source.html#l00292">RmUtility::SonarReading::all</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8cpp-source.html#l00012">handleAction()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="RmSonarMapper::setRemoteViewServer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void RmSonarMapper::setRemoteViewServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classRmServer.html">RmServer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>rs</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Assigns the server that will be serving map viewer strings (generated by this mapper). 
<p>
As map update strings are received from the <a class="el" href="classRmSonarMap.html">RmSonarMap</a>, this server is used to forward them on to its client.
<p>
Definition at line <a class="el" href="RmSonarMapper_8h-source.html#l00102">102</a> of file <a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="RmSonarMapper::updateTriggered"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classRmSonarMapper.html#w3">RmSonarMapper::UpdateType</a> RmSonarMapper::updateTriggered           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structRmUtility_1_1Pose.html">RmUtility::Pose</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pose</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns true if an update to the sonar map should be made. 
<p>
Determination is based upon the distance traveled and degree of turn made since the last update. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pose</em>&nbsp;</td><td>the last reported robot pose</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00129">129</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="RmUtility_8h-source.html#l00208">RmUtility::Pose::coord</a>, <a class="el" href="RmSettings_8h-source.html#l00092">RmSettings::MaxCollectionDegrees</a>, <a class="el" href="RmSettings_8h-source.html#l00088">RmSettings::MaxCollectionDistance</a>, <a class="el" href="RmUtility_8h-source.html#l00211">RmUtility::Pose::theta</a>, <a class="el" href="RmSonarMapper_8h-source.html#l00030">UpdateType</a>, <a class="el" href="RmUtility_8h-source.html#l00031">RmUtility::Coord::x</a>, and <a class="el" href="RmUtility_8h-source.html#l00034">RmUtility::Coord::y</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8cpp-source.html#l00020">mapReading()</a>, and <a class="el" href="RmSonarMapper_8cpp-source.html#l00074">mapReadings()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="RmSonarMapper::updateUsing"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::string RmSonarMapper::updateUsing           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structRmUtility_1_1SonarReading.html">RmUtility::SonarReading</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>reading</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const int&nbsp;</td>
          <td class="mdname" nowrap> <em>sonarNumber</em> = <code>-1</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Updates the sonar map using the given collection of sonar readings. 
<p>
At present, takes the last reading in the collection as the representative reading.
<p>
Definition at line <a class="el" href="RmSonarMapper_8cpp-source.html#l00187">187</a> of file <a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a>.
<p>
References <a class="el" href="RmUtility_8h-source.html#l00292">RmUtility::SonarReading::all</a>, <a class="el" href="RmUtility_8h-source.html#l00289">RmUtility::SonarReading::distance</a>, <a class="el" href="RmServer_8cpp-source.html#l00090">RmServer::sendClientReply()</a>, <a class="el" href="RmUtility_8h-source.html#l00286">RmUtility::SonarReading::sonarNumber</a>, and <a class="el" href="classRmSonarMap.html#a5">RmSonarMap::update()</a>.
<p>
Referenced by <a class="el" href="RmSonarMapper_8cpp-source.html#l00020">mapReading()</a>, and <a class="el" href="RmSonarMapper_8cpp-source.html#l00074">mapReadings()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="RmSonarMapper_8h-source.html">RmSonarMapper.h</a><li>src/<a class="el" href="RmSonarMapper_8cpp-source.html">RmSonarMapper.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun May 1 23:40:04 2005 for Robot Mapper by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
