<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Robot Mapper: RmLocalMap Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>RmLocalMap Class Reference</h1>Builds on the dynamic occupancy grid provided by <a class="el" href="class_rm_bayes_certainty_grid.html">RmBayesCertaintyGrid</a> by adding functionality particular to the notion of a <em>local</em> map, namely the ability to shift and rotate a map within a global frame of reference.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a>&gt;</code>
<p>
<p>Inheritance diagram for RmLocalMap:
<p><center><img src="class_rm_local_map.png" usemap="#RmLocalMap_map" border="0" alt=""></center>
<map name="RmLocalMap_map">
<area href="class_rm_bayes_certainty_grid.html" alt="RmBayesCertaintyGrid" shape="rect" coords="105,112,305,136">
<area href="class_rm_mutable_cartesian_grid.html" alt="RmMutableCartesianGrid< float >" shape="rect" coords="0,56,200,80">
<area href="class_rm_sonar_map.html" alt="RmSonarMap" shape="rect" coords="210,56,410,80">
<area href="class_rm_mutable_matrix.html" alt="RmMutableMatrix< float >" shape="rect" coords="0,0,200,24">
</map>
<a href="class_rm_local_map-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a0">cumDistance</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the accumulated distance traveled over the course of the map.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1" doxytag="RmLocalMap::cumTurn"></a>
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a1">cumTurn</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the accumulated degrees of turn made over the course of the map. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a2">pose</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the <em>unscaled</em> position and heading of the map, as specified during construction.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a3">reorientBy</a> (const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;shift)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shifts and rotates this map from its origin by the given deltas using the historical <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> data.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a4">reorientedBy</a> (const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;shift) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shifts and rotates a copy of this map from its origin by the given deltas using the historical <code>SonarReading</code> data.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a5">RmLocalMap</a> (<a class="el" href="struct_rm_settings.html">RmSettings</a> *s, <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> pose=<a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a>())</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a local map relative to the global origin such that global range readings provided via <a class="el" href="class_rm_local_map.html#a7">update()</a> are mapped to local coordinates.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a6">update</a> (const <a class="el" href="struct_rm_utility_1_1_mapped_sonar_reading.html">RmUtility::MappedSonarReading</a> &amp;mr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Converts the given reading to a <a class="el" href="struct_rm_utility_1_1_mapped_sonar_reading.html">RmUtility::MappedSonarReading</a> and passes on to <a class="el" href="class_rm_local_map.html#a7">update( const RmUtility::SonarReading &amp; )</a>.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#a7">update</a> (const <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;r)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds the given sonar reading to a history for later use in reorientation, and updates the map with the given sonar reading using the sonar model defined by <a class="el" href="struct_rm_settings.html#o19">RmSettings::SonarModel</a>.  <a href="#a7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_rm_local_map.html#b0">update</a> (const <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;r, const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;pivot, bool saveHistory=true)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the map with the given sonar reading, rotating it by the given theta relative to this map's global origin, and returns the data string itemizing the affected cells, as described by <a class="el" href="class_rm_bayes_certainty_grid.html#a7">RmBayesCertaintyGrid::update()</a>.  <a href="#b0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Builds on the dynamic occupancy grid provided by <a class="el" href="class_rm_bayes_certainty_grid.html">RmBayesCertaintyGrid</a> by adding functionality particular to the notion of a <em>local</em> map, namely the ability to shift and rotate a map within a global frame of reference. 
<p>
A local map is one that, with a collection of others local maps, can be used to form a <em>global</em> map, and in so doing will often need to be shifted and/or rotated to correct for localization errors. <h3>Usage</h3>
<p>
A map may be rotated automatically based on its orientation such that the robot heading upon creation of the map becomes due north in the local map (as determined by <a class="el" href="struct_rm_settings.html#o16">RmSettings::PreRotate</a>); it may also be rotated after the map has been created by any amount (using the original sonar data) via <a class="el" href="class_rm_local_map.html#a3">reorientBy()</a>. <p>
To use a map without any rotation, ensure that <a class="el" href="struct_rm_settings.html#o16">RmSettings::PreRotate</a> is set to <code>false</code> before any calls to <a class="el" href="class_rm_local_map.html#a7">update()</a> (this flag is checked on each call). <p>
For additional usage information, see the below references. <h3>Dependencies</h3>
<p>
This class utilizes the utility structures of <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> and <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> and also utilizes the <a class="el" href="struct_rm_settings.html#o16">RmSettings::PreRotate</a> setting. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="class_rm_bayes_certainty_grid.html">RmBayesCertaintyGrid</a> <p>
<a class="el" href="class_rm_mutable_cartesian_grid.html">RmMutableCartesianGrid</a> </dd></dl>

<p>

<p>
Definition at line <a class="el" href="_rm_local_map_8h-source.html#l00052">52</a> of file <a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a5" doxytag="RmLocalMap::RmLocalMap"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">RmLocalMap::RmLocalMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_rm_settings.html">RmSettings</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>pose</em> = <code><a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a>()</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes a local map relative to the global origin such that global range readings provided via <a class="el" href="class_rm_local_map.html#a7">update()</a> are mapped to local coordinates. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>settings that specify whether a local map should be pre-rotated based on its initial pose </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pose</em>&nbsp;</td><td>identifies what the origin of this map (0,0) and "due north" on the y-axis (theta = 0) are mapped to in the <em>unscaled</em> global environment</td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_rm_local_map_8h-source.html#l00064">64</a> of file <a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a>.
<p>
References <a class="el" href="_rm_local_map_8h-source.html#l00127">pose()</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0" doxytag="RmLocalMap::cumDistance"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">double RmLocalMap::cumDistance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the accumulated distance traveled over the course of the map. 
<p>

<p>
Definition at line <a class="el" href="_rm_local_map_8h-source.html#l00133">133</a> of file <a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a>.
<p>
Referenced by <a class="el" href="_rm_global_map_8cpp-source.html#l00049">RmGlobalMap::addToRegionMap()</a>, and <a class="el" href="_rm_global_map_8cpp-source.html#l00465">RmGlobalMap::localizedPose()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="RmLocalMap::pose"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> RmLocalMap::pose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the <em>unscaled</em> position and heading of the map, as specified during construction. 
<p>

<p>
Definition at line <a class="el" href="_rm_local_map_8h-source.html#l00127">127</a> of file <a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a>.
<p>
Referenced by <a class="el" href="_rm_global_map_8cpp-source.html#l00316">RmGlobalMap::installNewMap()</a>, <a class="el" href="_rm_global_map_8cpp-source.html#l00465">RmGlobalMap::localizedPose()</a>, and <a class="el" href="_rm_local_map_8h-source.html#l00064">RmLocalMap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="RmLocalMap::reorientBy"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const std::string RmLocalMap::reorientBy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>shift</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Shifts and rotates this map from its origin by the given deltas using the historical <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> data. 
<p>
For example, a call of <code>localMap.reorientBy( Pose( Coord(5,-5), -23.5 )</code>, where <code>localMap</code> has a global origin of (10, 10), will shift the map to the left and down by 5, giving it a new global origin of (15, 5), and rotate it counter-clockwise by 23.5<sup>o</sup>. <b>This modifies the global origin as well as all the historical sonar readings.</b> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shift</em>&nbsp;</td><td>unscaled amount by which local map should be shifted </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the data string itemizing the affected cells, as described by <a class="el" href="class_rm_bayes_certainty_grid.html#a7">RmBayesCertaintyGrid::update()</a>.</dd></dl>

<p>
Definition at line <a class="el" href="_rm_local_map_8cpp-source.html#l00078">78</a> of file <a class="el" href="_rm_local_map_8cpp-source.html">RmLocalMap.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00245">RmUtility::Pose::coord</a>, <a class="el" href="_rm_bayes_certainty_grid_8h-source.html#l00141">RmBayesCertaintyGrid::empty()</a>, <a class="el" href="_rm_utility_8h-source.html#l00248">RmUtility::Pose::theta</a>, and <a class="el" href="_rm_bayes_certainty_grid_8h-source.html#l00101">RmBayesCertaintyGrid::update()</a>.
<p>
Referenced by <a class="el" href="_rm_global_map_8cpp-source.html#l00316">RmGlobalMap::installNewMap()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="RmLocalMap::reorientedBy"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const std::string RmLocalMap::reorientedBy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>shift</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Shifts and rotates a copy of this map from its origin by the given deltas using the historical <code>SonarReading</code> data. 
<p>
(see <a class="el" href="class_rm_local_map.html#a3">reorientBy()</a> for more information). The global origin and historical sonar readings are not modified. <dl compact><dt><b>Returns:</b></dt><dd>the data string itemizing the affected cells, as described by <a class="el" href="class_rm_bayes_certainty_grid.html#a7">RmBayesCertaintyGrid::update()</a>.</dd></dl>

<p>
Definition at line <a class="el" href="_rm_local_map_8cpp-source.html#l00054">54</a> of file <a class="el" href="_rm_local_map_8cpp-source.html">RmLocalMap.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00245">RmUtility::Pose::coord</a>, <a class="el" href="_rm_utility_8h-source.html#l00320">RmUtility::SonarReading::robotPose</a>, <a class="el" href="_rm_utility_8h-source.html#l00248">RmUtility::Pose::theta</a>, and <a class="el" href="_rm_bayes_certainty_grid_8h-source.html#l00101">RmBayesCertaintyGrid::update()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="RmLocalMap::update"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const std::string RmLocalMap::update           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="struct_rm_utility_1_1_pose.html">RmUtility::Pose</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>pivot</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>saveHistory</em> = <code>true</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Updates the map with the given sonar reading, rotating it by the given theta relative to this map's global origin, and returns the data string itemizing the affected cells, as described by <a class="el" href="class_rm_bayes_certainty_grid.html#a7">RmBayesCertaintyGrid::update()</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>r</em>&nbsp;</td><td>the unscaled coordinate of the robot that is oriented to a four quadrant Cartesian coordinate and a heading that is oriented to a [0.0, 360.0) zero-north (polar) theta</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pivot</em>&nbsp;</td><td>the coordinate about which the robot pose is rotated theta degrees</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>saveHistory</em>&nbsp;</td><td>indicates whether given reading should be added to an internal history; the default is <code>true</code></td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="_rm_local_map_8cpp-source.html#l00013">13</a> of file <a class="el" href="_rm_local_map_8cpp-source.html">RmLocalMap.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00329">RmUtility::SonarReading::all</a>, <a class="el" href="_rm_utility_8h-source.html#l00245">RmUtility::Pose::coord</a>, <a class="el" href="_rm_utility_8h-source.html#l00320">RmUtility::SonarReading::robotPose</a>, <a class="el" href="_rm_utility_8h-source.html#l00323">RmUtility::SonarReading::sonarNumber</a>, <a class="el" href="_rm_utility_8h-source.html#l00248">RmUtility::Pose::theta</a>, and <a class="el" href="_rm_bayes_certainty_grid_8h-source.html#l00101">RmBayesCertaintyGrid::update()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="RmLocalMap::update"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const std::string RmLocalMap::update           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_mapped_sonar_reading.html">RmUtility::MappedSonarReading</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>mr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Converts the given reading to a <a class="el" href="struct_rm_utility_1_1_mapped_sonar_reading.html">RmUtility::MappedSonarReading</a> and passes on to <a class="el" href="class_rm_local_map.html#a7">update( const RmUtility::SonarReading &amp; )</a>. 
<p>

<p>
Reimplemented from <a class="el" href="class_rm_bayes_certainty_grid.html#a6">RmBayesCertaintyGrid</a>.
<p>
Definition at line <a class="el" href="_rm_local_map_8h-source.html#l00087">87</a> of file <a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00405">RmUtility::MappedSonarReading::reading</a>, and <a class="el" href="_rm_local_map_8cpp-source.html#l00006">update()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="RmLocalMap::update"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const std::string RmLocalMap::update           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="struct_rm_utility_1_1_sonar_reading.html">RmUtility::SonarReading</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>r</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds the given sonar reading to a history for later use in reorientation, and updates the map with the given sonar reading using the sonar model defined by <a class="el" href="struct_rm_settings.html#o19">RmSettings::SonarModel</a>. 
<p>
If enabled by <a class="el" href="struct_rm_settings.html#o16">RmSettings::PreRotate</a>, the pose information in the reading is first rotated by the global theta provided during construction. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>r</em>&nbsp;</td><td>the unscaled coordinate and heading of the robot that is oriented to a four quadrant Cartesian coordinate and [0.0, 360.0) zero-north (polar) theta </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the data string itemizing the affected cells, as described by <a class="el" href="class_rm_bayes_certainty_grid.html#a7">RmBayesCertaintyGrid::update()</a>.</dd></dl>

<p>
Reimplemented from <a class="el" href="class_rm_bayes_certainty_grid.html#a7">RmBayesCertaintyGrid</a>.
<p>
Definition at line <a class="el" href="_rm_local_map_8cpp-source.html#l00006">6</a> of file <a class="el" href="_rm_local_map_8cpp-source.html">RmLocalMap.cpp</a>.
<p>
References <a class="el" href="_rm_utility_8h-source.html#l00245">RmUtility::Pose::coord</a>, <a class="el" href="_rm_mutable_cartesian_grid_8h-source.html#l00261">RmMutableCartesianGrid&lt; float &gt;::origin()</a>, <a class="el" href="_rm_settings_8h-source.html#l00121">RmSettings::PreRotate</a>, and <a class="el" href="_rm_utility_8h-source.html#l00248">RmUtility::Pose::theta</a>.
<p>
Referenced by <a class="el" href="_rm_global_map_8cpp-source.html#l00852">RmGlobalMap::update()</a>, and <a class="el" href="_rm_local_map_8h-source.html#l00087">update()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="_rm_local_map_8h-source.html">RmLocalMap.h</a><li>src/<a class="el" href="_rm_local_map_8cpp-source.html">RmLocalMap.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Apr 3 16:46:54 2005 for Robot Mapper by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
